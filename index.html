<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kitchen Kompanion</title>
  <link rel="stylesheet" href="style.css">
</head>
<!-- https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_device_smartphone -->
<body>
  <style>
    .device-frame {
      width: 640px;
      height: 960px;
      margin: 30px auto;
      border: 2px solid #bbb;
      border-radius: 32px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.15);
      background: #f8f6f2;
      overflow: hidden;
      position: relative;
      display: flex;
      flex-direction: column;
    }
    .device-content {
      flex: 1 1 0;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }
    .tab-content {
      flex: 1 1 0;
      display: none;
      overflow-y: auto;
      padding: 32px 24px 90px 24px; /* extra bottom padding for navbar */
      box-sizing: border-box;
    }
    .tab-content.active {
      display: block;
    }
    .navbar {
      height: 70px;
      display: flex;
      background-color: #fff8f0;
      border-top: 2px solid #e0bfae;
      box-shadow: 0 -2px 8px rgba(0,0,0,0.04);
      border-bottom-left-radius: 32px;
      border-bottom-right-radius: 32px;
    }
    .navbar button {
      flex: 1;
      background: none;
      border: none;
      font-size: 15px;
      text-align: center;
      color: #a05a2c;
      padding: 8px 0 0 0;
      transition: background 0.2s;
      cursor: pointer;
    }
    .navbar button.active, .navbar button:hover, .navbar button:focus {
      background: #ffe5d0;
      font-weight: bold;
    }
    body {
      background: #eaeaea;
    }
    /* https://www.w3schools.com/howto/howto_css_modals.asp */
    #profileModal {
      position: fixed;
      top: 0; left: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }
    #profileModal .modal-content {
      background: #fff;
      padding: 32px 24px;
      border-radius: 16px;
      box-shadow: 0 2px 16px rgba(0,0,0,0.15);
      text-align: center;
    }
    #profileModal.hidden { display: none; }
    #todoList li {
      margin: 8px 0;
      cursor: pointer;
      transition: color 0.2s, text-decoration 0.2s;
    }
    #todoList li.done {
      text-decoration: line-through;
      color: #aaa;
    }
    .inventory-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    .inventory-title {
      font-size: 24px;
      font-weight: bold;
      display: flex;
      align-items: center;
    }
    .inventory-title img {
      margin-right: 8px;
    }
    .inventory-actions {
      display: flex;
      align-items: center;
    }
    .inventory-search {
      display: flex;
      align-items: center;
      border: 1px solid #ccc;
      border-radius: 16px;
      padding: 8px 12px;
      margin-right: 8px;
      flex: 1;
    }
    .inventory-search input {
      border: none;
      outline: none;
      margin-left: 8px;
      flex: 1;
    }
    .addBtn {
      background-color: #6db65b;
      color: white;
      border: none;
      border-radius: 16px;
      padding: 10px 16px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .addBtn:hover {
      background-color: #5cae50;
    }
    .inventory-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .inventory-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 12px;
    }
    .inventory-meta {
      display: flex;
      flex-direction: column;
    }
    .inventory-name {
      font-size: 18px;
      font-weight: 500;
    }
    .inventory-sub {
      font-size: 14px;
      color: #666;
      display: flex;
      align-items: center;
    }
    .category-tag {
      background-color: #e0f7fa;
      color: #00796b;
      padding: 4px 8px;
      border-radius: 12px;
      margin-right: 8px;
      font-size: 12px;
      cursor: pointer; /* make tag selectable */
    }
    .category-tag.selected {
      background-color: #00796b;
      color: #fff;
    }
    .inventory-right {
      display: flex;
      align-items: center;
    }
    .inventory-last-used {
      font-size: 12px;
      color: #999;
      margin-right: 12px;
    }
    .inventory-controls {
      display: flex;
      align-items: center;
    }
    .btn {
      background: #f0f0f0;
      border: none;
      border-radius: 8px;
      padding: 8px 12px;
      margin-right: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .btn:hover {
      background: #e0e0e0;
    }
    .qty-badge {
      background: #e8f5e9;
      color: #2e7d32;
      padding: 6px 12px;
      border-radius: 12px;
      font-weight: bold;
      margin-right: 8px;
    }
    .inventory-empty {
      text-align: center;
      color: #999;
      font-style: italic;
    }
  </style>
  <!-- https://www.w3schools.com/howto/howto_js_tabs.asp -->
  <div class="device-frame">
    <div class="device-content">
      <!-- Tab 1: Inventory (replaced with presentable inventory panel) -->
      <div id="tab1" class="tab-content active">
        <div class="inventory-panel">
           <div class="inventory-header">
             <div class="inventory-title">Inventory</div>
             <div class="inventory-actions">
               <div class="inventory-search" role="search" aria-label="Search inventory">
                 <input type="search" id="inventorySearch" placeholder="Search food or category">
               </div>
               <button class="addBtn" type="button" onclick="openAddInventory()">+ Add</button>
             </div>
           </div>
 
           <ul class="inventory-list" id="inventoryList" aria-live="polite">
             <!-- minimal items: name + category(optional) + qty badge + controls -->
            <li class="inventory-item" data-id="1" data-qty="2" data-unit="kg" data-category="gluten">
              <div class="inventory-meta">
                <div class="inventory-name">Flour</div>
                <div class="inventory-sub"></div>
              </div>
              <div class="inventory-right">
                <div class="inventory-controls">
                  <button class="btn" type="button" onclick="decrementQty(this)">‚àí</button>
                  <div class="qty-badge" aria-live="polite">2 kg</div>
                  <button class="btn" type="button" onclick="incrementQty(this)">+</button>
                  <button class="btn" type="button" onclick="removeInventoryItem(this)" title="Remove item">üóëÔ∏è</button>
                </div>
              </div>
            </li>
            <li class="inventory-item" data-id="2" data-qty="4" data-unit="lbs">
              <div class="inventory-meta">
                <div class="inventory-name">Chicken</div>
                <div class="inventory-sub"></div>
              </div>
              <div class="inventory-right">
                <div class="inventory-controls">
                  <button class="btn" type="button" onclick="decrementQty(this)">‚àí</button>
                  <div class="qty-badge">4 lbs</div>
                  <button class="btn" type="button" onclick="incrementQty(this)">+</button>
                  <button class="btn" type="button" onclick="removeInventoryItem(this)" title="Remove item">üóëÔ∏è</button>
                </div>
              </div>
            </li>
            <li class="inventory-item" data-id="3" data-qty="12" data-category="dairy">
              <div class="inventory-meta">
                <div class="inventory-name">Eggs</div>
                <div class="inventory-sub"></div>
              </div>
              <div class="inventory-right">
                <div class="inventory-controls">
                  <button class="btn" type="button" onclick="decrementQty(this)">‚àí</button>
                  <div class="qty-badge">12</div>
                  <button class="btn" type="button" onclick="incrementQty(this)">+</button>
                  <button class="btn" type="button" onclick="removeInventoryItem(this)" title="Remove item">üóëÔ∏è</button>
                </div>
              </div>
            </li>
           </ul>
 
           <div id="inventoryEmpty" class="inventory-empty" style="display:none;">
             No items. Use ‚ÄúAdd‚Äù to create one.
           </div>
         </div>
       </div>
      <!-- Tab 2: Meal Planner (empty for now) -->
      <div id="tab2" class="tab-content">
        <h2>Meal Planner</h2>
        <table>
          <tr><th>Day</th><th>Breakfast</th><th>Lunch</th><th>Dinner</th></tr>
          <tr><td>Mon</td><td>Oatmeal</td><td>Salad</td><td>Chicken</td></tr>
          <tr><td>Tue</td><td>Eggs</td><td>Sandwich</td><td>Pasta</td></tr>
          <tr><td>Wed</td><td>Yogurt</td><td>Soup</td><td>Stir-fry</td></tr>
        </table>
        <p class="muted">(Minimal static planner ‚Äî add editing later.)</p>
      </div>
      <!-- Tab 3: Shopping List (empty for now) -->
      <div id="tab3" class="tab-content">
        <h2>Shopping List</h2>
        <label for="budgetInput">Set Your Budget: $</label>
        <input type="number" id="budgetInput" value="30" onchange="updateBudget()" style="margin-bottom: 12px; font-size: 16px;">

        <ul id="shoppingList">
          <li><span>Tomatoes</span> <button class="delete-btn" onclick="removeItem(this)">üóëÔ∏è</button></li>
          <li><span>Apples</span> <button class="delete-btn" onclick="removeItem(this)">üóëÔ∏è</button></li>
          <li><span>Bread</span> <button class="delete-btn" onclick="removeItem(this)">üóëÔ∏è</button></li>
          <li><span>Eggs</span> <button class="delete-btn" onclick="removeItem(this)">üóëÔ∏è</button></li>
          <li><span>Milk</span> <button class="delete-btn" onclick="removeItem(this)">üóëÔ∏è</button></li>
      </ul>

        <div id="budgetStatus" style="margin-top: 12px; font-size: 16px;"></div>
      </div>
      <!-- Tab 4: Recipes (empty for now) -->
      <div id="tab4" class="tab-content">
        <h2>Recipes</h2>
        <div class="recipe-card">
          <h3>Simple Pancakes</h3>
          <p>Ingredients: Flour, Eggs, Milk, Sugar, Baking Powder</p>
          <p>Steps: Mix, cook on skillet, serve.</p>
        </div>
      </div>
      <!-- Tab 5: Settings (empty for now) -->
      <div id="tab5" class="tab-content">
        <h2>Settings</h2>
      </div>
      <!-- Tab 6: (kept empty for compatibility) --> 
      <div id="tab6" class="tab-content">
        <!-- reserved for future use; intentionally empty -->
      </div>
     <!-- Icons from https://icons8.com/icons -->
    <div class="navbar">
      <button id="tabBtn1" onclick="openTab('tab1')"><img src="icons/inventory.png"></img><br>Inventory</button>
      <button id="tabBtn2" onclick="openTab('tab2')"><img src="icons/meal.png"></img><br>Meal Planner</button>
      <button id="tabBtn3" onclick="openTab('tab3')"><img src="icons/groceries.png"></img><br>Shopping List</button>
      <button id="tabBtn4" onclick="openTab('tab4')"><img src="icons/recipes.png"></img><br>Recipes</button>
      <button id="tabBtn5" onclick="openTab('tab5')"><img src="icons/settings.png"></img><br>Settings</button>
    </div>
  </div>
  <script>
    (function () {
      let selectedCategory = ''; // active category filter, '' = none
      function parseQtyText(text) {
        const m = (text||'').trim().match(/^([\d.]+)\s*(.*)$/);
        if (!m) return { qty: 0, unit: '' };
        return { qty: parseFloat(m[1]) || 0, unit: (m[2] || '').trim() };
      }
      function updateBadge(li) {
        const badge = li.querySelector('.qty-badge');
        const qty = parseFloat(li.dataset.qty) || 0;
        const unit = li.dataset.unit || '';
        badge.textContent = qty + (unit ? (' ' + unit) : '');
      }
      function renderCategoryTag(li) {
        const cat = (li.dataset.category || '').trim();
        const sub = li.querySelector('.inventory-sub') || (function(){
          const s = document.createElement('div'); s.className = 'inventory-sub';
          li.querySelector('.inventory-meta').appendChild(s); return s;
        })();
        const existing = sub.querySelector('.category-tag');
        if (existing) existing.remove();
        if (cat) {
          const tag = document.createElement('span');
          tag.className = 'category-tag';
          tag.textContent = cat;
          tag.tabIndex = 0;
          tag.setAttribute('role','button');
          tag.onclick = function (e) { toggleCategoryFilter(cat); e.stopPropagation(); };
          sub.insertBefore(tag, sub.firstChild);
          if (selectedCategory === cat) tag.classList.add('selected');
        }
      }
      function normalizeAll() {
        document.querySelectorAll('.inventory-item').forEach(li => {
          const badge = li.querySelector('.qty-badge');
          if (badge) {
            const p = parseQtyText(badge.textContent);
            if (!li.dataset.qty) li.dataset.qty = p.qty || 0;
            if (!li.dataset.unit) li.dataset.unit = p.unit || '';
            updateBadge(li);
          } else {
            const controls = li.querySelector('.inventory-controls');
            if (controls) {
              const b = document.createElement('div');
              b.className = 'qty-badge';
              b.textContent = (li.dataset.qty || '0') + (li.dataset.unit ? ' ' + li.dataset.unit : '');
              controls.insertBefore(b, controls.children[1] || null);
            }
          }
          renderCategoryTag(li);
        });
      }
      function updateInventoryEmpty() {
        const list = document.getElementById('inventoryList');
        const empty = document.getElementById('inventoryEmpty');
        empty.style.display = (list.children.length === 0) ? '' : 'none';
      }

      window.incrementQty = window.incrementQty || function (btn) {
        const li = btn.closest('.inventory-item');
        if (!li) return;
        li.dataset.qty = (parseFloat(li.dataset.qty || 0) + 1).toString();
        updateBadge(li);
      };
      window.decrementQty = window.decrementQty || function (btn) {
        const li = btn.closest('.inventory-item');
        if (!li) return;
        let qty = parseFloat(li.dataset.qty || 0) - 1;
        if (qty < 0) qty = 0;
        li.dataset.qty = qty.toString();
        updateBadge(li);
      };

     // remove inventory item (used by remove button)
     window.removeInventoryItem = window.removeInventoryItem || function (btn) {
       const li = btn.closest('.inventory-item');
       if (!li) return;
       li.remove();
       updateInventoryEmpty();
     };

      window.openAddInventory = window.openAddInventory || function () {
        const name = prompt('Item name:');
        if (!name) return;
        const qtyRaw = prompt('Quantity (number, optional unit like "kg" after a space), e.g. "2 kg" or "3":','1');
        let qty = 1, unit = '';
        if (qtyRaw) {
          const m = qtyRaw.trim().match(/^([\d.]+)\s*(.*)$/);
          if (m) { qty = parseFloat(m[1]) || 1; unit = (m[2] || '').trim(); }
        }
       // choose category tag (dairy, gluten, other, none)
       let cat = prompt('Category (dairy / gluten / other / none):','none');
       if (!cat) cat = 'none';
       cat = cat.trim().toLowerCase();
       if (cat === 'other') {
         const custom = prompt('Enter custom category:','');
         if (custom) cat = custom.trim();
         else cat = 'other';
       }
       if (cat === 'none') cat = '';
        const list = document.getElementById('inventoryList');
        const id = Date.now();
        const li = document.createElement('li');
        li.className = 'inventory-item';
       if (unit) li.dataset.unit = unit;
       if (cat) li.dataset.category = cat;
        li.dataset.qty = qty;
        li.dataset.id = id;
        // include remove button; shopping cart button intentionally omitted
        li.innerHTML = '<div class="inventory-meta"><div class="inventory-name"></div><div class="inventory-sub"></div></div>' +
                      '<div class="inventory-right"><div class="inventory-controls">' +
                      '<button class="btn" type="button" onclick="decrementQty(this)">‚àí</button>' +
                      '<div class="qty-badge" aria-live="polite"></div>' +
                      '<button class="btn" type="button" onclick="incrementQty(this)">+</button>' +
                      '<button class="btn" type="button" onclick="removeInventoryItem(this)">üóëÔ∏è</button>' +
                      '</div></div>';
        li.querySelector('.inventory-name').textContent = name;
        list.appendChild(li);
        updateBadge(li);
        renderCategoryTag(li);
        updateInventoryEmpty();
      };
      window.removeItem = window.removeItem || function (btn) {
        const li = btn.closest('li');
        if (li) li.remove();
      };

     // category filter toggler
     window.toggleCategoryFilter = window.toggleCategoryFilter || function (cat) {
       selectedCategory = (selectedCategory === cat) ? '' : cat;
       document.querySelectorAll('#inventoryList .inventory-item').forEach(li => {
         const itemCat = (li.dataset.category || '').trim();
         const matchesCat = !selectedCategory || (itemCat && itemCat === selectedCategory);
         // also keep search filter in mind
         const q = (document.getElementById('inventorySearch').value || '').toLowerCase();
         const name = (li.querySelector('.inventory-name')||{}).textContent || '';
         const matchesSearch = !q || name.toLowerCase().includes(q);
         li.style.display = (matchesCat && matchesSearch) ? '' : 'none';
         // update tag selected state
         const tag = li.querySelector('.category-tag');
         if (tag) {
           if (selectedCategory && (li.dataset.category || '') === selectedCategory) tag.classList.add('selected');
           else tag.classList.remove('selected');
         }
       });
     };

      function filterInventory() {
        const q = (document.getElementById('inventorySearch').value || '').toLowerCase().trim();
        document.querySelectorAll('#inventoryList .inventory-item').forEach(li => {
          const name = (li.querySelector('.inventory-name')||{}).textContent || '';
          const cat = (li.dataset.category || '').toLowerCase();
          const matchesSearch = q === '' || name.toLowerCase().includes(q) || (cat && cat.includes(q));
          const matchesCategory = !selectedCategory || (cat === selectedCategory);
          li.style.display = (matchesSearch && matchesCategory) ? '' : 'none';
        });
      }

      document.addEventListener('DOMContentLoaded', function () {
        normalizeAll();
        updateInventoryEmpty();
        const s = document.getElementById('inventorySearch');
        if (s) s.addEventListener('input', filterInventory);
      });
    })();
  </script>
</body>
</html>